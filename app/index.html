<!doctype html>
<html lang="en-US">
  <head>
    <script src='https://code.jquery.com/jquery-1.11.0.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js'></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Interactive: Coal & Gas Extraction Near WV Water Sources</title>

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="152x152" href="https://ohiovalleyresource.org/wp-content/themes/wfpl-v2/res/img/apple-touch-icon-152-precomposed.png" />
    <link rel="icon" sizes="120x120" href="https://ohiovalleyresource.org/wp-content/themes/wfpl-v2/res/img/apple-touch-icon-120-precomposed.png" />
    <link rel="icon" sizes="76x76" href="https://ohiovalleyresource.org/wp-content/themes/wfpl-v2/res/img/apple-touch-icon-76-precomposed.png" />
    <!-- Safari, you're the worst -->
    <meta name='format-detection' content='telephone=no'>
    
    
    <!-- BEGIN TWITTER SUMMARY CARD -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Interactive: Coal & Gas Extraction Near WV Water Sources">
    <meta name="twitter:site" content="@OVReSRC">
    <meta name="twitter:url" content="https://local.wfpl.org/ovr/water-hazards/index.html">
    <meta name="twitter:image" content="https://local.wfpl.org/ovr/water-hazards/assets/ovr-water-hazards-cover.png">
    <meta name="twitter:description" content="EXPLORE: The Ohio Valley ReSource used data on protected water areas to build this tool showing some of the coal mines and gas wells within the watersheds providing West Virginians drinking water.">
    
    <!-- Social sharing meta -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Interactive: Coal & Gas Extraction Near WV Water Sources">
    <meta property="og:site_name" content="Ohio Valley ReSource">
    <meta property="og:url" content="https://local.wfpl.org/ovr/water-hazards/index.html">
    <meta property="og:image" content="https://local.wfpl.org/ovr/water-hazards/assets/ovr-water-hazards-cover.png">
    <meta property="og:description" content="EXPLORE: The Ohio Valley ReSource used data on protected water areas to build this tool showing some of the coal mines and gas wells within the watersheds providing West Virginians drinking water.">
    
    <!-- Google structured data -->
    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "NewsArticle",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://local.wfpl.org/ovr/water-hazards/"
      },
      "headline": "Interactive: Coal & Gas Extraction Near WV Water Sources",
      "image": {
        "@type": "ImageObject",
        "url": "https://local.wfpl.org/ovr/water-hazards/assets/ovr-water-hazards-cover.png"
      },
      "author": {
        "@type": "Person",
        "name": "NPR Staff"
      },
      "publisher": {
        "@type": "Organization",
        "name": "NPR",
        "logo": {
          "@type": "ImageObject",
          "url": "https://local.wfpl.org/ovr/water-hazards/assets/logo.png",
          "width": 891,
          "height": 296
        }
      },
      "description": "EXPLORE: The Ohio Valley ReSource used data on protected water areas to build this tool showing some of the coal mines and gas wells within the watersheds providing West Virginians drinking water."
    }
    </script>
    <link rel="stylesheet" type="text/css" href="Skeleton-2.0.4/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="Skeleton-2.0.4/css/skeleton.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    
    <style> /* set the CSS */
      body { font: 12px Arial;}
      path { 
          stroke: steelblue;
          stroke-width: 2;
          fill: none;
      }
      .axis path,
      .axis line {
          fill: none;
          stroke: grey;
          stroke-width: 1;
          shape-rendering: crispEdges;
      }
    </style>
    
  </head>
  <body>
    <div id="container" class="container">
      <div id="container-top" class="row">
        <h1>Kentucky COVID-19 Case Tracker</h1>
        <div class="lead" id="intro">
          <p>BlargLorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</p>
        </div>
        <div id="state-stats" class="stat-row row">
          <table class="u-full-width">
            <thead>
              <tr>
                <th>State</th>
                <th>Total tests performed</th>
                <th>Total positive cases</th>
                <th>Total deaths</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Kentucky</td>
                <td>10,245</td>
                <td>1,398</td>
                <td>12</td>
              </tr>
            </tbody>
          </table>
        </div><!-- END STATE-STATS -->
        
        <select id="county-select" class="row">
          <option>Select a county...</option>
        </select>
        
      </div><!-- END CONTAINER-TOP -->
      
      <div id="stats" class="row">
        
        <div id="cnty-cases" class="stat-row row">
          <div id="cases-chart" class="chart one-half column">
            <img src="assets/chart-example.png" alt="county covid-19 case count overtime" />
          </div>
          <div id="cases-text" class="text one-half column">
            <h5>Positive cases</strong></h5>
            <p>Epsum factorial non deposit quid pro quo hic escorol. Olypian quarrels et gorilla congolium sic ad nauseum. Souvlaki ignitus carborundum e pluribus unum. Defacto lingo est igpay atinlay. Marquee selectus non provisio incongruous feline nolo contendre. Gratuitous octopus niacin, sodium glutimate.</p>
          </div>
        </div>
        
        <div id="cnty-deaths" class="stat-row row">
          <div id="cases-chart" class="chart one-half column">
            <img src="assets/chart-example.png" alt="county covid-19 case count overtime" />
          </div>
          <div id="cases-text" class="text one-half column">
            <h5>Deaths</strong></h5>
            <p>Epsum factorial non deposit quid pro quo hic escorol. Olypian quarrels et gorilla congolium sic ad nauseum. Souvlaki ignitus carborundum e pluribus unum. Defacto lingo est igpay atinlay. Marquee selectus non provisio incongruous feline nolo contendre. Gratuitous octopus niacin, sodium glutimate.</p>
          </div>
        </div>
      </div><!-- END STATS -->
      
      <div id="data-notes" class="row">
        <div id="data-sources">
          <p>Sources: xxxxxx; xxxxxx; xxxxxx</p>
        </div>
        <div id="data-disclaimers">
          <p>CB's Nuts Peanut Butter is produced in Washington State from peanuts grown in Texas. Aside from using the best peanuts in the world, our slow barrel roasting process is what sets us apart and gives our PB its rich roasted taste that's unlike any other brand on the market. Its also this roasting technique, along with our Creamunchy grind that limits annoying oil separation in the jar.</p>
        </div>
      </div><!-- END DATA-NOTES -->
    </div>
    
    <script>
      var state_fips = '21';
      var include_state_testing = false;
      
      //populate state stats
      
      
      
      //populate county select list
      d3.json("assets/data/cnty-fips.json", function(error, data) {
        if (error) {
          return console.warn(error);
        }
        var counties = Object.values(data[state_fips]).sort();
        var dropdown = d3.select('#county-select');
                          
        dropdown.selectAll('option')
            .data(counties)
          .enter().append('option')
            .attr('value', function(d) {
              return d;
              //console.log(d);
            })
            .text(function(d) {
                return d;
            });
      });
      
    </script>
    <script>
    //  window.onload=function(){
    //    d3.json("assets/data/cnty-fips.json", function(error, data) {
    //      console.log(data);
    //      if (error) {
    //          return console.warn(error);
    //      }
    //      d3.select("select")
    //        .selectAll("option")
    //        .data(data)
    //        .enter()
    //        .append("option")
    //        .attr('value', function(d) {
    //          return d.values();
    //          //console.log(d);
    //        })
    //        .text(function(d) {
    //            return d.keys();
    //        });
    //    });
    //  }//]]>
        
        
        
        
        
      //  var stateSelect = d3.select("#state-select");
      //  
      //  var stateCounties = cnty_fips['06'];        
      //
      //  //we have select all options tags from inside select tag (which there are 0 atm)
      //  //and assigned data as to be the base of modelling that selection.
      //  var stateOptions = stateSelect.selectAll('option')
      //    .data(stateCounties);
      //    
      //  console.log(stateOptions);
      //
      //  //d3 sees we have less elements (0) than the data (2), so we are tasked to create
      //  //these missing inside the `options.enter` pseudo selection.
      //  //if we had some elements from before, they would be reused, and we could access their
      //  //selection with just `options`
      //  stateOptions.enter()
      //    .append('option')
      //    .attr('value', function(d) {
      //      return d.values();
      //      //console.log(d);
      //    })
      //    .text(function(d) {
      //      return d.values();
      //      //console.log(d);
      //    });
      //  });
      //
      //d3.select("#state-select")
      //  .append("select")
      //  .append("option")
      //  .attr("value", "---")
      //  .text("---");
      
      
      
      //const pymChild = new pym.Child({ polling: 100 });
      //  
      ////////////// THIS IS ALL AUTO GEOLOCATOR CODE. WE CAN'T USE IT UNTIL WE UPGRADE SERVER TO HTTPS
      //function getLocation() {
      //    if (navigator.geolocation) {
      //        navigator.geolocation.getCurrentPosition(autoGeo);
      //    } else {
      //        console.log("Geolocation is not supported by this browser.");
      //    }
      //}
      //
      //function autoGeo(position){
      //  var foundLat = position.coords.latitude;
      //  var foundLng = position.coords.longitude;
      //  var point = [foundLat, foundLng];
      //  var inKY = findState(point);
      //  
      //  if(inKY == 1){
      //    if(marker){
      //      map.removeLayer(marker); 
      //    }
      //    marker = L.marker([foundLat, foundLng]).addTo(map);
      //    map.flyTo(new L.LatLng(foundLat, foundLng), 11);
      //    findDistrict(foundLat,foundLng)
      //  }else{
      //    houseDIV.innerHTML = "<p><em>Looks like you're not in Kentucky</em></p>";
      //    metroDIV.innerHTML = "<p><em>Looks like you're not in Jefferson County</em></p>";
      //    houseContestDIV.innerHTML = '';
      //    metroContestDIV.innerHTML = '';
      //  }
      //}
      //  
      //function findState(point){
      //  const addURL = 'http://dev.virtualearth.net/REST/v1/Locations/' + point + '?o=json&key=' + BING_KEY;
      //  
      //  $.ajax({
      //    url: addURL,
      //    type: 'GET',
      //    success: function(result){
      //      var state = result['resourceSets'][0]['resources'][0]['address']['adminDistrict'];
      //      
      //      geoResultsDIV.innerHTML = 'Showing results for ' + result['resourceSets'][0]['resources'][0]['address']['formattedAddress'];
      //      
      //      if(state != 'KY'){
      //        return 0;
      //      }else{
      //        return 1;
      //      }            
      //    },
      //    error: function(error){
      //      console.log(`Error ${error}`)
      //    }
      //  })
      //}
        ////////////// END AUTO GEOLOCATON
    </script>
    
    <script src="app.js" async></script>
    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
    //If we're embedding, we don't want to make this a new session so keep this commented out
    //ga('create', 'UA-5828686-4', 'auto');
    //
    ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->
  </body>
</html>
